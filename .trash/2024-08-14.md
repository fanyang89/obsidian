---
title: 碎碎念（1）
author: fanyang
pubDatetime: 2024-08-14T00:00:00Z
slug: memo-20240814
featured: false
draft: false
tags:
  - memo
  - http
  - nginx
  - ZooKeeper
  - db
  - consensus
  - cockroachdb
  - cpp
  - test
  - cli
  - Rust
  - vm
  - Linux
description:
---
- #http #nginx
	在未明确指定的情况下其超时时间均默认为 60s
	简单来说（实际情况更复杂一些但这里不进一步探讨）只有在 upstream 处理请求耗时超过 60s 的情况下 Nginx 才能判定其Gateway Timeout 并按照504处理，然而客户端设置的 HTTP 请求超时时间其实只有 15s：这其中还包括外网数据传输的时间
	于是问题来了：每一个服务端处理耗时超过 15s 的请求，nginx 由于还没达到 60s 的超时阈值不会判定 504 ，而客户端则会由于超过本地的 15s 超时时间直接断开连接，nginx 于是就会记录为 499

- 技术内幕: 构建 #Go 语言的动态插桩 Agent
	https://jiekun.dev/posts/dynamic_instrumentation_agent/

- #ZooKeeper
	移除所有的 `ZooKeeperServer not running` 日志
	```bash
    fd 'zookeeper.log.*' -x sd '[^\n]*ZooKeeperServer not running\n' '' {}
    ```

- #DB #Consensus #cockroachdb 
	[How Pipelining consensus writes speeds up distributed SQL transactions](https://www.cockroachlabs.com/blog/transaction-pipelining/)

- #C++ #test
  - https://github.com/eranpeer/FakeIt
  - C++ mocking made easy

- #Consensus
  - https://riemann.io/
  - Riemann aggregates events from your servers and applications with a powerful stream processing language

- #cli 工具搜索
  - https://terminaltrove.com

- #Rust #Linux #io_uring
  - [Rust - Using io_uring through your own bindings](https://www.thespatula.io/rust/rust_io_uring_bindings/)

- #Rust #vm
  - [So You Want to Build a Language VM - Part 01 - Overview and a Simple VM](https://blog.subnetzero.io/post/building-language-vm-part-01/)

- #Rust
  - https://github.com/PoOnesNerfect/bit_gossip
  - Pathfinding library for calculating all node pairs' shortest paths in an unweighted undirected graph.

- #Rust 项目快速启动
  - 常用依赖
  ```bash
    cargo add clap -F derive
    cargo add anyhow -F backtrace
    cargo add tokio -F full
    ```

- #Linux 内核基础设施：`static_key`
  - https://linux.laoqinren.net/kernel/static_key/
