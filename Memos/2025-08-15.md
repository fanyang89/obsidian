```
Gem::Ext::BuildError: ERROR: Failed to build gem native extension.

    current directory: /home/fanmi/.gems/ruby/3.4.0/gems/xxhash-0.6.0/ext/xxhash
/usr/bin/ruby extconf.rb
creating Makefile

current directory: /home/fanmi/.gems/ruby/3.4.0/gems/xxhash-0.6.0/ext/xxhash
make DESTDIR\= sitearchdir\=./.gem.20250815-114772-8m91cf
sitelibdir\=./.gem.20250815-114772-8m91cf clean

current directory: /home/fanmi/.gems/ruby/3.4.0/gems/xxhash-0.6.0/ext/xxhash
make DESTDIR\= sitearchdir\=./.gem.20250815-114772-8m91cf
sitelibdir\=./.gem.20250815-114772-8m91cf
compiling libxxhash.c
compiling xxhash.c
In file included from /usr/include/ruby-3.4.0/ruby/ruby.h:27,
                 from /usr/include/ruby-3.4.0/ruby.h:38,
                 from xxhash.h:3,
                 from xxhash.c:1:
xxhash.c: In function ‘Init_xxhash’:
xxhash.c:240:50: error: passing argument 3 of ‘rb_define_singleton_method_02’ from
incompatible pointer type [-Wincompatible-pointer-types]
240 |   rb_define_singleton_method(mInternal, "xxh32", (ruby_method*) &xxhash_xxh32,
2);
/usr/include/ruby-3.4.0/ruby/internal/anyargs.h:311:144: note: in definition of macro
‘rb_define_singleton_method’
311 | #define rb_define_singleton_method(obj, mid, func, arity)
RBIMPL_ANYARGS_DISPATCH_rb_define_singleton_method((arity), (func))((obj), (mid), (func),
(arity))
|
^~~~
/usr/include/ruby-3.4.0/ruby/internal/anyargs.h:274:21: note: expected ‘VALUE (*)(VALUE,
VALUE,  VALUE)’ {aka ‘long unsigned int (*)(long unsigned int,  long unsigned int,  long
unsigned int)’} but argument is of type ‘VALUE (*)(void)’ {aka ‘long unsigned int
(*)(void)’}
  274 | RBIMPL_ANYARGS_DECL(rb_define_singleton_method, VALUE, const char *)
      |                     ^~~~~~~~~~~~~~~~~~~~~~~~~~
/usr/include/ruby-3.4.0/ruby/internal/anyargs.h:260:41: note: in definition of macro
‘RBIMPL_ANYARGS_DECL’
260 | RBIMPL_ANYARGS_ATTRSET(sym) static void sym ## _02(__VA_ARGS__, VALUE(*)(VALUE,
VALUE, VALUE), int); \
      |                                         ^~~
xxhash.c:241:55: error: passing argument 3 of ‘rb_define_singleton_method_02’ from
incompatible pointer type [-Wincompatible-pointer-types]
241 |   rb_define_singleton_method(mInternal, "xxh32_file", (ruby_method*)
&xxhash_xxh32_file, 2);
/usr/include/ruby-3.4.0/ruby/internal/anyargs.h:311:144: note: in definition of macro
‘rb_define_singleton_method’
311 | #define rb_define_singleton_method(obj, mid, func, arity)
RBIMPL_ANYARGS_DISPATCH_rb_define_singleton_method((arity), (func))((obj), (mid), (func),
(arity))
|
^~~~
/usr/include/ruby-3.4.0/ruby/internal/anyargs.h:274:21: note: expected ‘VALUE (*)(VALUE,
VALUE,  VALUE)’ {aka ‘long unsigned int (*)(long unsigned int,  long unsigned int,  long
unsigned int)’} but argument is of type ‘VALUE (*)(void)’ {aka ‘long unsigned int
(*)(void)’}
  274 | RBIMPL_ANYARGS_DECL(rb_define_singleton_method, VALUE, const char *)
      |                     ^~~~~~~~~~~~~~~~~~~~~~~~~~
/usr/include/ruby-3.4.0/ruby/internal/anyargs.h:260:41: note: in definition of macro
‘RBIMPL_ANYARGS_DECL’
260 | RBIMPL_ANYARGS_ATTRSET(sym) static void sym ## _02(__VA_ARGS__, VALUE(*)(VALUE,
VALUE, VALUE), int); \
      |                                         ^~~
xxhash.c:242:50: error: passing argument 3 of ‘rb_define_singleton_method_02’ from
incompatible pointer type [-Wincompatible-pointer-types]
242 |   rb_define_singleton_method(mInternal, "xxh64", (ruby_method*) &xxhash_xxh64,
2);
/usr/include/ruby-3.4.0/ruby/internal/anyargs.h:311:144: note: in definition of macro
‘rb_define_singleton_method’
311 | #define rb_define_singleton_method(obj, mid, func, arity)
RBIMPL_ANYARGS_DISPATCH_rb_define_singleton_method((arity), (func))((obj), (mid), (func),
(arity))
|
^~~~
/usr/include/ruby-3.4.0/ruby/internal/anyargs.h:274:21: note: expected ‘VALUE (*)(VALUE,
VALUE,  VALUE)’ {aka ‘long unsigned int (*)(long unsigned int,  long unsigned int,  long
unsigned int)’} but argument is of type ‘VALUE (*)(void)’ {aka ‘long unsigned int
(*)(void)’}
  274 | RBIMPL_ANYARGS_DECL(rb_define_singleton_method, VALUE, const char *)
      |                     ^~~~~~~~~~~~~~~~~~~~~~~~~~
/usr/include/ruby-3.4.0/ruby/internal/anyargs.h:260:41: note: in definition of macro
‘RBIMPL_ANYARGS_DECL’
260 | RBIMPL_ANYARGS_ATTRSET(sym) static void sym ## _02(__VA_ARGS__, VALUE(*)(VALUE,
VALUE, VALUE), int); \
      |                                         ^~~
xxhash.c:243:55: error: passing argument 3 of ‘rb_define_singleton_method_02’ from
incompatible pointer type [-Wincompatible-pointer-types]
243 |   rb_define_singleton_method(mInternal, "xxh64_file", (ruby_method*)
&xxhash_xxh64_file, 2);
/usr/include/ruby-3.4.0/ruby/internal/anyargs.h:311:144: note: in definition of macro
‘rb_define_singleton_method’
311 | #define rb_define_singleton_method(obj, mid, func, arity)
RBIMPL_ANYARGS_DISPATCH_rb_define_singleton_method((arity), (func))((obj), (mid), (func),
(arity))
|
^~~~
/usr/include/ruby-3.4.0/ruby/internal/anyargs.h:274:21: note: expected ‘VALUE (*)(VALUE,
VALUE,  VALUE)’ {aka ‘long unsigned int (*)(long unsigned int,  long unsigned int,  long
unsigned int)’} but argument is of type ‘VALUE (*)(void)’ {aka ‘long unsigned int
(*)(void)’}
  274 | RBIMPL_ANYARGS_DECL(rb_define_singleton_method, VALUE, const char *)
      |                     ^~~~~~~~~~~~~~~~~~~~~~~~~~
/usr/include/ruby-3.4.0/ruby/internal/anyargs.h:260:41: note: in definition of macro
‘RBIMPL_ANYARGS_DECL’
260 | RBIMPL_ANYARGS_ATTRSET(sym) static void sym ## _02(__VA_ARGS__, VALUE(*)(VALUE,
VALUE, VALUE), int); \
      |                                         ^~~
xxhash.c:248:53: error: passing argument 3 of ‘rb_define_singleton_method_01’ from
incompatible pointer type [-Wincompatible-pointer-types]
248 |   rb_define_singleton_method(cStreamingHash, "new", (ruby_method*)
&xxhash32_streaming_hash_new, 1);
/usr/include/ruby-3.4.0/ruby/internal/anyargs.h:311:144: note: in definition of macro
‘rb_define_singleton_method’
311 | #define rb_define_singleton_method(obj, mid, func, arity)
RBIMPL_ANYARGS_DISPATCH_rb_define_singleton_method((arity), (func))((obj), (mid), (func),
(arity))
|
^~~~
/usr/include/ruby-3.4.0/ruby/internal/anyargs.h:274:21: note: expected ‘VALUE (*)(VALUE,
VALUE)’ {aka ‘long unsigned int (*)(long unsigned int,  long unsigned int)’} but argument
is of type ‘VALUE (*)(void)’ {aka ‘long unsigned int (*)(void)’}
  274 | RBIMPL_ANYARGS_DECL(rb_define_singleton_method, VALUE, const char *)
      |                     ^~~~~~~~~~~~~~~~~~~~~~~~~~
/usr/include/ruby-3.4.0/ruby/internal/anyargs.h:259:41: note: in definition of macro
‘RBIMPL_ANYARGS_DECL’
259 | RBIMPL_ANYARGS_ATTRSET(sym) static void sym ## _01(__VA_ARGS__, VALUE(*)(VALUE,
VALUE), int); \
      |                                         ^~~
xxhash.c:249:46: error: passing argument 3 of ‘rb_define_method_01’ from incompatible
pointer type [-Wincompatible-pointer-types]
249 |   rb_define_method(cStreamingHash, "update", (ruby_method*)
&xxhash32_streaming_hash_update, 1);
/usr/include/ruby-3.4.0/ruby/internal/anyargs.h:291:136: note: in definition of macro
‘rb_define_method’
291 | #define rb_define_method(klass, mid, func, arity)
RBIMPL_ANYARGS_DISPATCH_rb_define_method((arity), (func))((klass), (mid), (func),
(arity))
|
^~~~
/usr/include/ruby-3.4.0/ruby/internal/anyargs.h:280:21: note: expected ‘VALUE (*)(VALUE,
VALUE)’ {aka ‘long unsigned int (*)(long unsigned int,  long unsigned int)’} but argument
is of type ‘VALUE (*)(void)’ {aka ‘long unsigned int (*)(void)’}
  280 | RBIMPL_ANYARGS_DECL(rb_define_method, VALUE, const char *)
      |                     ^~~~~~~~~~~~~~~~
/usr/include/ruby-3.4.0/ruby/internal/anyargs.h:259:41: note: in definition of macro
‘RBIMPL_ANYARGS_DECL’
259 | RBIMPL_ANYARGS_ATTRSET(sym) static void sym ## _01(__VA_ARGS__, VALUE(*)(VALUE,
VALUE), int); \
      |                                         ^~~
xxhash.c:250:46: error: passing argument 3 of ‘rb_define_method_00’ from incompatible
pointer type [-Wincompatible-pointer-types]
250 |   rb_define_method(cStreamingHash, "digest", (ruby_method*)
&xxhash32_streaming_hash_digest, 0);
/usr/include/ruby-3.4.0/ruby/internal/anyargs.h:291:136: note: in definition of macro
‘rb_define_method’
291 | #define rb_define_method(klass, mid, func, arity)
RBIMPL_ANYARGS_DISPATCH_rb_define_method((arity), (func))((klass), (mid), (func),
(arity))
|
^~~~
/usr/include/ruby-3.4.0/ruby/internal/anyargs.h:280:21: note: expected ‘VALUE (*)(VALUE)’
{aka ‘long unsigned int (*)(long unsigned int)’} but argument is of type ‘VALUE
(*)(void)’ {aka ‘long unsigned int (*)(void)’}
  280 | RBIMPL_ANYARGS_DECL(rb_define_method, VALUE, const char *)
      |                     ^~~~~~~~~~~~~~~~
/usr/include/ruby-3.4.0/ruby/internal/anyargs.h:258:41: note: in definition of macro
‘RBIMPL_ANYARGS_DECL’
258 | RBIMPL_ANYARGS_ATTRSET(sym) static void sym ## _00(__VA_ARGS__, VALUE(*)(VALUE),
int); \
      |                                         ^~~
xxhash.c:251:45: error: passing argument 3 of ‘rb_define_method_00’ from incompatible
pointer type [-Wincompatible-pointer-types]
251 |   rb_define_method(cStreamingHash, "reset", (ruby_method*)
&xxhash32_streaming_hash_reset, 0);
/usr/include/ruby-3.4.0/ruby/internal/anyargs.h:291:136: note: in definition of macro
‘rb_define_method’
291 | #define rb_define_method(klass, mid, func, arity)
RBIMPL_ANYARGS_DISPATCH_rb_define_method((arity), (func))((klass), (mid), (func),
(arity))
|
^~~~
/usr/include/ruby-3.4.0/ruby/internal/anyargs.h:280:21: note: expected ‘VALUE (*)(VALUE)’
{aka ‘long unsigned int (*)(long unsigned int)’} but argument is of type ‘VALUE
(*)(void)’ {aka ‘long unsigned int (*)(void)’}
  280 | RBIMPL_ANYARGS_DECL(rb_define_method, VALUE, const char *)
      |                     ^~~~~~~~~~~~~~~~
/usr/include/ruby-3.4.0/ruby/internal/anyargs.h:258:41: note: in definition of macro
‘RBIMPL_ANYARGS_DECL’
258 | RBIMPL_ANYARGS_ATTRSET(sym) static void sym ## _00(__VA_ARGS__, VALUE(*)(VALUE),
int); \
      |                                         ^~~
xxhash.c:256:55: error: passing argument 3 of ‘rb_define_singleton_method_01’ from
incompatible pointer type [-Wincompatible-pointer-types]
256 |   rb_define_singleton_method(cStreamingHash64, "new", (ruby_method*)
&xxhash64_streaming_hash_new, 1);
/usr/include/ruby-3.4.0/ruby/internal/anyargs.h:311:144: note: in definition of macro
‘rb_define_singleton_method’
311 | #define rb_define_singleton_method(obj, mid, func, arity)
RBIMPL_ANYARGS_DISPATCH_rb_define_singleton_method((arity), (func))((obj), (mid), (func),
(arity))
|
^~~~
/usr/include/ruby-3.4.0/ruby/internal/anyargs.h:274:21: note: expected ‘VALUE (*)(VALUE,
VALUE)’ {aka ‘long unsigned int (*)(long unsigned int,  long unsigned int)’} but argument
is of type ‘VALUE (*)(void)’ {aka ‘long unsigned int (*)(void)’}
  274 | RBIMPL_ANYARGS_DECL(rb_define_singleton_method, VALUE, const char *)
      |                     ^~~~~~~~~~~~~~~~~~~~~~~~~~
/usr/include/ruby-3.4.0/ruby/internal/anyargs.h:259:41: note: in definition of macro
‘RBIMPL_ANYARGS_DECL’
259 | RBIMPL_ANYARGS_ATTRSET(sym) static void sym ## _01(__VA_ARGS__, VALUE(*)(VALUE,
VALUE), int); \
      |                                         ^~~
xxhash.c:257:48: error: passing argument 3 of ‘rb_define_method_01’ from incompatible
pointer type [-Wincompatible-pointer-types]
257 |   rb_define_method(cStreamingHash64, "update", (ruby_method*)
&xxhash64_streaming_hash_update, 1);
/usr/include/ruby-3.4.0/ruby/internal/anyargs.h:291:136: note: in definition of macro
‘rb_define_method’
291 | #define rb_define_method(klass, mid, func, arity)
RBIMPL_ANYARGS_DISPATCH_rb_define_method((arity), (func))((klass), (mid), (func),
(arity))
|
^~~~
/usr/include/ruby-3.4.0/ruby/internal/anyargs.h:280:21: note: expected ‘VALUE (*)(VALUE,
VALUE)’ {aka ‘long unsigned int (*)(long unsigned int,  long unsigned int)’} but argument
is of type ‘VALUE (*)(void)’ {aka ‘long unsigned int (*)(void)’}
  280 | RBIMPL_ANYARGS_DECL(rb_define_method, VALUE, const char *)
      |                     ^~~~~~~~~~~~~~~~
/usr/include/ruby-3.4.0/ruby/internal/anyargs.h:259:41: note: in definition of macro
‘RBIMPL_ANYARGS_DECL’
259 | RBIMPL_ANYARGS_ATTRSET(sym) static void sym ## _01(__VA_ARGS__, VALUE(*)(VALUE,
VALUE), int); \
      |                                         ^~~
xxhash.c:258:48: error: passing argument 3 of ‘rb_define_method_00’ from incompatible
pointer type [-Wincompatible-pointer-types]
258 |   rb_define_method(cStreamingHash64, "digest", (ruby_method*)
&xxhash64_streaming_hash_digest, 0);
/usr/include/ruby-3.4.0/ruby/internal/anyargs.h:291:136: note: in definition of macro
‘rb_define_method’
291 | #define rb_define_method(klass, mid, func, arity)
RBIMPL_ANYARGS_DISPATCH_rb_define_method((arity), (func))((klass), (mid), (func),
(arity))
|
^~~~
/usr/include/ruby-3.4.0/ruby/internal/anyargs.h:280:21: note: expected ‘VALUE (*)(VALUE)’
{aka ‘long unsigned int (*)(long unsigned int)’} but argument is of type ‘VALUE
(*)(void)’ {aka ‘long unsigned int (*)(void)’}
  280 | RBIMPL_ANYARGS_DECL(rb_define_method, VALUE, const char *)
      |                     ^~~~~~~~~~~~~~~~
/usr/include/ruby-3.4.0/ruby/internal/anyargs.h:258:41: note: in definition of macro
‘RBIMPL_ANYARGS_DECL’
258 | RBIMPL_ANYARGS_ATTRSET(sym) static void sym ## _00(__VA_ARGS__, VALUE(*)(VALUE),
int); \
      |                                         ^~~
xxhash.c:259:47: error: passing argument 3 of ‘rb_define_method_00’ from incompatible
pointer type [-Wincompatible-pointer-types]
259 |   rb_define_method(cStreamingHash64, "reset", (ruby_method*)
&xxhash64_streaming_hash_reset, 0);
/usr/include/ruby-3.4.0/ruby/internal/anyargs.h:291:136: note: in definition of macro
‘rb_define_method’
291 | #define rb_define_method(klass, mid, func, arity)
RBIMPL_ANYARGS_DISPATCH_rb_define_method((arity), (func))((klass), (mid), (func),
(arity))
|
^~~~
/usr/include/ruby-3.4.0/ruby/internal/anyargs.h:280:21: note: expected ‘VALUE (*)(VALUE)’
{aka ‘long unsigned int (*)(long unsigned int)’} but argument is of type ‘VALUE
(*)(void)’ {aka ‘long unsigned int (*)(void)’}
  280 | RBIMPL_ANYARGS_DECL(rb_define_method, VALUE, const char *)
      |                     ^~~~~~~~~~~~~~~~
/usr/include/ruby-3.4.0/ruby/internal/anyargs.h:258:41: note: in definition of macro
‘RBIMPL_ANYARGS_DECL’
258 | RBIMPL_ANYARGS_ATTRSET(sym) static void sym ## _00(__VA_ARGS__, VALUE(*)(VALUE),
int); \
      |                                         ^~~
make: *** [Makefile:251: xxhash.o] Error 1

make failed, exit code 2

Gem files will remain installed in /home/fanmi/.gems/ruby/3.4.0/gems/xxhash-0.6.0 for
inspection.
Results logged to
/home/fanmi/.gems/ruby/3.4.0/extensions/x86_64-linux/3.4.0/xxhash-0.6.0/gem_make.out

  /usr/lib/ruby/3.4.0/rubygems/ext/builder.rb:125:in 'Gem::Ext::Builder.run'
  /usr/lib/ruby/3.4.0/rubygems/ext/builder.rb:51:in 'block in Gem::Ext::Builder.make'
  /usr/lib/ruby/3.4.0/rubygems/ext/builder.rb:43:in 'Array#each'
  /usr/lib/ruby/3.4.0/rubygems/ext/builder.rb:43:in 'Gem::Ext::Builder.make'
/usr/lib/ruby/3.4.0/rubygems/ext/ext_conf_builder.rb:44:in
'Gem::Ext::ExtConfBuilder.build'
  /usr/lib/ruby/3.4.0/rubygems/ext/builder.rb:206:in 'Gem::Ext::Builder#build_extension'
/usr/lib/ruby/3.4.0/rubygems/ext/builder.rb:240:in 'block in
Gem::Ext::Builder#build_extensions'
  /usr/lib/ruby/3.4.0/rubygems/ext/builder.rb:237:in 'Array#each'
  /usr/lib/ruby/3.4.0/rubygems/ext/builder.rb:237:in 'Gem::Ext::Builder#build_extensions'
  /usr/lib/ruby/3.4.0/rubygems/installer.rb:844:in 'Gem::Installer#build_extensions'
/usr/lib/ruby/gems/3.4.0/gems/bundler-2.5.22/lib/bundler/rubygems_gem_installer.rb:109:in
'Bundler::RubyGemsGemInstaller#build_extensions'
/usr/lib/ruby/gems/3.4.0/gems/bundler-2.5.22/lib/bundler/rubygems_gem_installer.rb:28:in
'Bundler::RubyGemsGemInstaller#install'
/usr/lib/ruby/gems/3.4.0/gems/bundler-2.5.22/lib/bundler/source/rubygems.rb:205:in
'Bundler::Source::Rubygems#install'
/usr/lib/ruby/gems/3.4.0/gems/bundler-2.5.22/lib/bundler/installer/gem_installer.rb:55:in
'Bundler::GemInstaller#install'
/usr/lib/ruby/gems/3.4.0/gems/bundler-2.5.22/lib/bundler/installer/gem_installer.rb:17:in
'Bundler::GemInstaller#install_from_spec'
/usr/lib/ruby/gems/3.4.0/gems/bundler-2.5.22/lib/bundler/installer/parallel_installer.rb:133:in
'Bundler::ParallelInstaller#do_install'
/usr/lib/ruby/gems/3.4.0/gems/bundler-2.5.22/lib/bundler/installer/parallel_installer.rb:124:in
'block in Bundler::ParallelInstaller#worker_pool'
/usr/lib/ruby/gems/3.4.0/gems/bundler-2.5.22/lib/bundler/worker.rb:62:in
'Bundler::Worker#apply_func'
/usr/lib/ruby/gems/3.4.0/gems/bundler-2.5.22/lib/bundler/worker.rb:57:in 'block in
Bundler::Worker#process_queue'
  <internal:kernel>:168:in 'Kernel#loop'
/usr/lib/ruby/gems/3.4.0/gems/bundler-2.5.22/lib/bundler/worker.rb:54:in
'Bundler::Worker#process_queue'
/usr/lib/ruby/gems/3.4.0/gems/bundler-2.5.22/lib/bundler/worker.rb:90:in 'block (2
levels) in Bundler::Worker#create_threads'

An error occurred while installing xxhash (0.6.0), and Bundler cannot
continue.

In Gemfile:
  xxhash
```
