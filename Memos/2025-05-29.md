```
Core was generated by `/usr/sbin/zbs-inspectord'.
Program terminated with signal SIGSEGV, Segmentation fault.

#0  0x00005647b441b8d9 in std::__new_allocator<zbs::consensus::ZooKeeper::ZkWatchContext*>::construct<zbs::consensus::ZooKeeper::ZkWatchContext*, zbs::consensus::ZooKeeper::ZkWatchContext* const&>
    (this=0x5647b60487e0, __p=0x80fe) at /opt/rh/gcc-toolset-14/root/usr/include/c++/14/bits/new_allocator.h:189
189	/opt/rh/gcc-toolset-14/root/usr/include/c++/14/bits/new_allocator.h: No such file or directory.
[Current thread is 1 (Thread 0x7f3b69ac0700 (LWP 110599))]

(gdb) bt
#0  0x00005647b441b8d9 in std::__new_allocator<zbs::consensus::ZooKeeper::ZkWatchContext*>::construct<zbs::consensus::ZooKeeper::ZkWatchContext*, zbs::consensus::ZooKeeper::ZkWatchContext* const&>
    (this=0x5647b60487e0, __p=0x80fe) at /opt/rh/gcc-toolset-14/root/usr/include/c++/14/bits/new_allocator.h:189
#1  std::allocator_traits<std::allocator<zbs::consensus::ZooKeeper::ZkWatchContext*> >::construct<zbs::consensus::ZooKeeper::ZkWatchContext*, zbs::consensus::ZooKeeper::ZkWatchContext* const&> (
    __a=..., __p=0x80fe) at /opt/rh/gcc-toolset-14/root/usr/include/c++/14/bits/alloc_traits.h:534
#2  std::deque<zbs::consensus::ZooKeeper::ZkWatchContext*, std::allocator<zbs::consensus::ZooKeeper::ZkWatchContext*> >::emplace_back<zbs::consensus::ZooKeeper::ZkWatchContext* const&> (
    this=0x5647b60487e0) at /opt/rh/gcc-toolset-14/root/usr/include/c++/14/bits/deque.tcc:170
#3  zbs::AsyncBatchHandleQueueImpl<zbs::consensus::ZooKeeper::ZkWatchContext*, true, std::function<void (std::deque<zbs::consensus::ZooKeeper::ZkWatchContext*, std::allocator<zbs::consensus::ZooKeeper::ZkWatchContext*> >&&)>, std::function<void (zbs::consensus::ZooKeeper::ZkWatchContext* const&)> >::Enqueue(zbs::consensus::ZooKeeper::ZkWatchContext* const&) (this=0x5647b60487a8,
    t=@0x7f3b69abaf60: 0x5647b661c240) at /usr/src/debug/zbs-5.4.7-rc24.0.release.git.g19e642d24.tl3.SMTX.hygon.HCI.x86_64/src/common/async_queue.h:68
#4  0x00005647b441c4d7 in zbs::AsyncQueue<zbs::consensus::ZooKeeper::ZkWatchContext*, zbs::ExecInCoroutine, std::function<void (zbs::consensus::ZooKeeper::ZkWatchContext* const&)> >::Enqueue(zbs::consensus::ZooKeeper::ZkWatchContext* const&) (this=0x5647b6048780, t=@0x7f3b69abaf60: 0x5647b661c240)
    at /usr/src/debug/zbs-5.4.7-rc24.0.release.git.g19e642d24.tl3.SMTX.hygon.HCI.x86_64/src/common/async_queue.h:260
#5  zbs::consensus::ZooKeeper::ZooWatcher (zh=0x5647b65e0000, type=<optimized out>, state=<optimized out>, path=0x5647b5996280 "", watcherCtx=0x5647b6048748)
    at /usr/src/debug/zbs-5.4.7-rc24.0.release.git.g19e642d24.tl3.SMTX.hygon.HCI.x86_64/src/consensus/zookeeper.cc:294
#6  0x00005647b482282a in do_foreach_watcher ()
#7  0x00005647b4822a14 in deliverWatchers ()
#8  0x00005647b48122a5 in process_completions ()
#9  0x00005647b482484c in do_completion ()
#10 0x00007f3b714161ca in start_thread () from /lib64/libpthread.so.0
#11 0x00007f3b6e1658d3 in clone () from /lib64/libc.so.6
```

```
(gdb) info registers
rax            0x5647b661c240      94866002526784
rbx            0x5647b60487a8      94865996416936
rcx            0x5647b5996280      94865989395072
rdx            0x80fe              33022
rsi            0x7f3b69abaf60      139893152657248
rdi            0x5647b60487dc      94865996416988
rbp            0x7f3b69abaf30      0x7f3b69abaf30
rsp            0x7f3b69abaec0      0x7f3b69abaec0
r8             0x0                 0
r9             0x0                 0
r10            0x0                 0
r11            0x206               518
r12            0x7f3b69abaf60      139893152657248
r13            0x5647b60487dc      94865996416988
r14            0x7f3b69abaf60      139893152657248
r15            0x5647b661c240      94866002526784
rip            0x5647b441b8d9      0x5647b441b8d9 <zbs::AsyncBatchHandleQueueImpl<zbs::consensus::ZooKeeper::ZkWatchContext*, true, std::function<void (std::deque<zbs::consensus::ZooKeeper::ZkWatchContext*, std::allocator<zbs::consensus::ZooKeeper::ZkWatchContext*> >&&)>, std::function<void (zbs::consensus::ZooKeeper::ZkWatchContext* const&)> >::Enqueue(zbs::consensus::ZooKeeper::ZkWatchContext* const&)+89>
eflags         0x10287             [ CF PF SF IF RF ]
cs             0x33                51
ss             0x2b                43
ds             0x0                 0
es             0x0                 0
fs             0x0                 0
gs             0x0                 0
```

```
   0x00005647b441b8c0 <+64>:	mov    0x78(%rbx),%rax
   0x00005647b441b8c4 <+68>:	mov    0x68(%rbx),%rdx
   0x00005647b441b8c8 <+72>:	sub    $0x8,%rax
   0x00005647b441b8cc <+76>:	cmp    %rax,%rdx
   0x00005647b441b8cf <+79>:	je     0x5647b441bb60 <zbs::AsyncBatchHandleQueueImpl<zbs::consensus::ZooKeeper::ZkWatchContext*, true, std::function<void (std::deque<zbs::consensus::ZooKeeper::ZkWatchContext*, std::allocator<zbs::consensus::ZooKeeper::ZkWatchContext*> >&&)>, std::function<void (zbs::consensus::ZooKeeper::ZkWatchContext* const&)> >::Enqueue(zbs::consensus::ZooKeeper::ZkWatchContext* const&)+736>
   0x00005647b441b8d5 <+85>:	mov    (%r12),%rax
=> 0x00005647b441b8d9 <+89>:	mov    %rax,(%rdx) // rdx=0x80fe
```

```
(gdb) p/x *(0x5647b60487a8+0x68)
$2 = 0x80fe
```

```
I0528 01:45:42.601769 52031 main.cc:87] [ZOO] zookeeper_init_internal:1256 2025-05-28 01:45:42,601:51952(0x7f3b6a4d4700):ZOO_INFO@zookeeper_init_internal@1256: Initiating client connection, host=10.
96.101.11:2181,10.96.101.12:2181,10.96.101.13:2181 sessionTimeout=4000 watcher=0x5647b441c270 sessionId=0 sessionPasswd=<null> context=0x5647b6048e48 flags=0
```

```
2025-05-29T15:53:42,225 [myid:] - ERROR [WorkerSender[myid=3]:QuorumCnxManager@414] - Exception while submitting quorum connection request
java.util.concurrent.RejectedExecutionException: Task Thread[QuorumConnectionReqThread-1,5,main] rejected from java.util.concurrent.ThreadPoolExecutor@a88786b[Terminated, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 2]
        at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2063) ~[?:1.8.0_312]
        at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:830) ~[?:1.8.0_312]
        at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1379) ~[?:1.8.0_312]
        at org.apache.zookeeper.server.quorum.QuorumCnxManager.initiateConnectionAsync(QuorumCnxManager.java:407) [zookeeper-3.5.9.jar:3.5.9-0a1aae9684f41a87d3161c2c27d157a126d73f37]
        at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:691) [zookeeper-3.5.9.jar:3.5.9-0a1aae9684f41a87d3161c2c27d157a126d73f37]
        at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:716) [zookeeper-3.5.9.jar:3.5.9-0a1aae9684f41a87d3161c2c27d157a126d73f37]
        at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:670) [zookeeper-3.5.9.jar:3.5.9-0a1aae9684f41a87d3161c2c27d157a126d73f37]
        at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:530) [zookeeper-3.5.9.jar:3.5.9-0a1aae9684f41a87d3161c2c27d157a126d73f37]
        at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:509) [zookeeper-3.5.9.jar:3.5.9-0a1aae9684f41a87d3161c2c27d157a126d73f37]
        at java.lang.Thread.run(Thread.java:748) [?:1.8.0_312]
2025-05-29T15:53:42,225 [myid:] - INFO  [WorkerSender[myid=3]:FastLeaderElection$Messenger$WorkerSender@514] - WorkerSender is down
```
