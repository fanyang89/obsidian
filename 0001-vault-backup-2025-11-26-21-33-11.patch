From a9a37dab246c951587f75ebb0605a689b7216ffb Mon Sep 17 00:00:00 2001
From: fanyang <fanyang89@outlook.com>
Date: Wed, 26 Nov 2025 21:33:12 +0800
Subject: [PATCH] vault backup: 2025-11-26 21:33:11

---
 .obsidian/icons/simple-icons/N26.svg |  1 +
 KMS API 设计讨论.md                  | 42 ++++++++++++++++++++++++++++
 Memos/2025-11-13.md                  | 15 ++++++++++
 Memos/2025-11-17.md                  |  0
 PVE 9.0 显卡直通.md                  |  7 +++++
 未命名 16.md                         |  8 ++++++
 未命名 19.md                         |  8 ++++++
 未命名 20.md                         | 40 ++++++++++++++++++++++++++
 8 files changed, 121 insertions(+)
 create mode 100644 .obsidian/icons/simple-icons/N26.svg
 create mode 100644 KMS API 设计讨论.md
 create mode 100644 Memos/2025-11-13.md
 create mode 100644 Memos/2025-11-17.md
 create mode 100644 PVE 9.0 显卡直通.md
 create mode 100644 未命名 16.md
 create mode 100644 未命名 19.md
 create mode 100644 未命名 20.md

diff --git a/.obsidian/icons/simple-icons/N26.svg b/.obsidian/icons/simple-icons/N26.svg
new file mode 100644
index 00000000..5bf7a4e6
--- /dev/null
+++ b/.obsidian/icons/simple-icons/N26.svg
@@ -0,0 +1 @@
+<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="16px" height="16px"><path d="M0 3.803v1.195h7.436V3.803H0zM12.69 7.29c-2.034 0-3.038 1.252-3.038 2.684 0 .234.027.468.092.728l1.393.135a3.697 3.697 0 0 1-.09-.793c0-1.072.71-1.586 1.598-1.586.866 0 1.507.485 1.507 1.652 0 1.186-.58 1.995-1.464 2.88-.925.923-2.4 2.027-3.112 2.534v1.092h6.135v-1.195h-4.168c.695-.48 1.69-1.279 2.133-1.72.502-.503 1.931-1.794 1.931-3.636 0-1.903-1.24-2.775-2.918-2.775zm8.34 0c-1.976 0-3.454 1.517-3.454 4.916 0 3.017 1.233 4.508 3.356 4.508 1.754 0 3.068-1.198 3.068-3.172 0-1.542-.823-3.066-2.793-3.066-1.1 0-1.884.51-2.281 1.263 0-1.78.62-3.33 2.094-3.33.937 0 1.309.538 1.507 1.422l1.366-.271c-.321-1.527-1.292-2.27-2.864-2.27zM.075 7.389v9.228h1.33v-6.312c0-.56-.013-.898-.039-1.223h.026c.136.372.298.699.539 1.123l3.732 6.412h1.69V7.39H6.04v6.31c0 .56.013.898.04 1.223h-.028a7.252 7.252 0 0 0-.537-1.123L1.783 7.389H.076zm20.817 4.185c1.114 0 1.744.822 1.744 1.992 0 1.256-.717 2.034-1.701 2.034-1.09 0-1.843-1.001-1.973-2.329.33-1.133 1.063-1.697 1.93-1.697zM0 19.008v1.19h7.436v-1.19H0z"></path></svg>
\ No newline at end of file
diff --git a/KMS API 设计讨论.md b/KMS API 设计讨论.md
new file mode 100644
index 00000000..dce4c97b
--- /dev/null
+++ b/KMS API 设计讨论.md	
@@ -0,0 +1,42 @@
+
+```
+GET /kms/kmip/A  {}
+
+/kms/aws/
+
+/kms
+
+/kms/v1/kmip /....
+/kms/v2
+
+kmip serivce = A
+aws  serivce = B
+
+GET    /path
+POST   /path
+PUT    /path
+DELETE /kms?id=KMS-AWS-123 {body}
+
+POST   /kms/rotate {body}
+
+GET    /kms
+
+{
+  type: aws
+	id:   KMS-AWS-123
+	name: f
+	descprtion:
+	
+	kmip: null
+	aws:  {
+	
+	}
+}
+
+GET /kms
+
+[
+{ type: aws, ... kmip: { name: xxx }, aws: { name: xxx } }
+{ type: kmip }
+]
+```
\ No newline at end of file
diff --git a/Memos/2025-11-13.md b/Memos/2025-11-13.md
new file mode 100644
index 00000000..687ad50e
--- /dev/null
+++ b/Memos/2025-11-13.md
@@ -0,0 +1,15 @@
+
+# Dogfood 卷规模
+
+```shell
+[root@dogfood-idc-elf-103 14:15:29 fanyang]$ less volumes.txt
+[root@dogfood-idc-elf-103 14:15:37 fanyang]$ cat volumes.txt  | wc -l
+7286
+```
+
+约 $7286-2=7284$ 个卷
+每个卷需要：
+- IOPS (Counter)
+- Bandwidth (Counter)
+- Latency (histogram)
+大约 
\ No newline at end of file
diff --git a/Memos/2025-11-17.md b/Memos/2025-11-17.md
new file mode 100644
index 00000000..e69de29b
diff --git a/PVE 9.0 显卡直通.md b/PVE 9.0 显卡直通.md
new file mode 100644
index 00000000..baa804bd
--- /dev/null
+++ b/PVE 9.0 显卡直通.md	
@@ -0,0 +1,7 @@
+
+```
+│ class    │ device │ id           │ iommugroup │ vendor │ device_name                                             │ mde
+│ 0x030000 │ 0xe211 │ 0000:03:00.0 │         84 │ 0x8086 │ Battlemage G21 [Intel Graphics]                         │
+│ 0x030000 │ 0xe211 │ 0000:07:00.0 │         89 │ 0x8086 │ Battlemage G21 [Intel Graphics]                         │
+│ 0x030000 │ 0x1402 │ 0000:e6:00.0 │         20 │ 0x10de │ GM206 [GeForce GTX 950]                                 │
+```
\ No newline at end of file
diff --git a/未命名 16.md b/未命名 16.md
new file mode 100644
index 00000000..31aa44b1
--- /dev/null
+++ b/未命名 16.md	
@@ -0,0 +1,8 @@
+```
+================================ FAILED TESTS =================================
+"set configuration with multiple members"
+"Test receive vote message (follower)"
+===============================================================================
+test cases:   196 |   194 passed |  2 failed
+assertions: 10996 | 10983 passed | 13 failed
+```
\ No newline at end of file
diff --git a/未命名 19.md b/未命名 19.md
new file mode 100644
index 00000000..11f35974
--- /dev/null
+++ b/未命名 19.md	
@@ -0,0 +1,8 @@
+
+
+Dogfood-SMTXOS-62x-boost-rdma-19-11-SKS-Controlplane
+集群的19-13节点在 2025-11-10 07:16:51卡死，
+期间除了这个节点以外的其他节点在
+11-1007:16:51～07:17:52
+
+出现了一分钟的存储服务健康状态异常的告警，但是当时其他节点的chunk和meta没有发现异常日志，网络也是正常的
diff --git a/未命名 20.md b/未命名 20.md
new file mode 100644
index 00000000..036461db
--- /dev/null
+++ b/未命名 20.md	
@@ -0,0 +1,40 @@
+```C++
+TEST_F(MetricV2Test, RemoveMetricByTag) {
+    auto& reg = GlobalRegistry::Instance();
+
+    auto& f = reg.Get<Gauge>(name, help, {{"a", ""}, {"b", "2"}});  // has constant tag: a
+    EXPECT_TRUE(f.HasTag("a"));
+    EXPECT_TRUE(!f.HasTag("b"));
+    EXPECT_TRUE(f.HasLabels({{"a", ""}, {"b", "2"}}));
+    EXPECT_EQ(0, f.Size());
+
+    auto r = f.Add({{"c", ""}, {"_instance", "node1"}}, std::make_unique<Gauge>());
+    EXPECT_TRUE(r);
+    EXPECT_TRUE(f.HasTag("a"));
+    EXPECT_TRUE(!f.HasTag("b"));
+    EXPECT_TRUE(f.HasTag("c"));
+    EXPECT_TRUE(!f.HasTag("_instance"));
+    EXPECT_EQ(1, f.Size());
+
+    r = f.Add({{"c", ""}, {"_instance", "node2"}}, std::make_unique<Gauge>());
+    EXPECT_TRUE(r);
+    EXPECT_TRUE(f.HasTag("a"));
+    EXPECT_TRUE(!f.HasTag("b"));
+    EXPECT_TRUE(f.HasTag("c"));
+    EXPECT_TRUE(!f.HasTag("_instance"));
+    EXPECT_EQ(2, f.Size());
+
+    r = f.Add({{"d", ""}}, std::make_unique<Gauge>());
+    EXPECT_TRUE(r);
+    EXPECT_TRUE(f.HasTag("a"));
+    EXPECT_TRUE(!f.HasTag("b"));
+    EXPECT_TRUE(f.HasTag("c"));
+    EXPECT_TRUE(!f.HasTag("_instance"));
+    EXPECT_TRUE(f.HasTag("d"));
+    EXPECT_EQ(3, f.Size());
+
+    bool removed = RemoveMetric(name, "c");
+    EXPECT_TRUE(removed);
+    EXPECT_EQ(1, f.Size());
+}
+```
\ No newline at end of file
-- 
2.50.1.windows.1

