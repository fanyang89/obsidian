https://cs.smartx.com/cases/detail?id=1038596

现象：vCenter 报警：（节点二）主机的 vSphere HA 检测信号数据存储数目 1 少于要求数目 2 查看节点二存储相比其它两个节点，少挂载了一个 NFS。

1. 进入 fisheye 发现近期很多 SCVM 通讯报警如下 “主节点 SCVM03 无法连接到 zbs-metad 服务的 LEADER 角色节点。” 完整导出如附件。
2. 在 vCenter 中断开节点二 ESXI 主机，再重新连接后找到 2 个 NFS 存储。
3. 刷新后 vCenter 中的报警消失。

```
[192_168_18_73_71ee63c3-d349-4dd9-b032-49bea8da9d75]/zookeeper.log│2023-01-25T19:05:05,818 [myid:] - WARN  [QuorumPeer[myid=3](plain=10.0.10.73:2181)(secure=disabled):Follower@100] - Exception when following the leader                                                                                                                     ┤
[192_168_18_73_71ee63c3-d349-4dd9-b032-49bea8da9d75]/zookeeper.log│java.net.SocketTimeoutException: Read timed out
[192_168_18_73_71ee63c3-d349-4dd9-b032-49bea8da9d75]/zookeeper.log│2023-01-25T19:05:05,830 [myid:] - INFO  [QuorumPeer[myid=3](plain=10.0.10.73:2181)(secure=disabled):QuorumPeer@1255] - LOOKING                                                                                                                                              │
[192_168_18_73_71ee63c3-d349-4dd9-b032-49bea8da9d75]/zookeeper.log│2023-01-25T19:07:52,320 [myid:] - INFO  [QuorumPeer[myid=3](plain=10.0.10.73:2181)(secure=disabled):QuorumPeer@748] - Peer state changed: following - broadcast                                                                                                             │

[192_168_18_73_71ee63c3-d349-4dd9-b032-49bea8da9d75]/zookeeper.log│2023-01-25T19:08:21,077 [myid:] - WARN  [QuorumPeer[myid=3](plain=10.0.10.73:2181)(secure=disabled):Follower@100] - Exception when following the leader                                                                                                                     │
[192_168_18_73_71ee63c3-d349-4dd9-b032-49bea8da9d75]/zookeeper.log│2023-01-25T19:08:21,084 [myid:] - INFO  [QuorumPeer[myid=3](plain=10.0.10.73:2181)(secure=disabled):QuorumPeer@1255] - LOOKING                                                                                                                                              │

```

```bash
2023-01-29T05:10:15,526 [myid:] - WARN  [QuorumPeer[myid=3](plain=10.0.10.73:2181)(secure=disabled):Follower@100] - Exception when following the leader
# 2023-01-29T05:10:15，leader=71，72、73 断开连接
# 2023-01-29T05:10:42，follower=73,72
# 2023-01-29T05:10:43，leader=71
# 正常工作
# 2023-01-29T05:10:48，72，73 与 71 断开，集群停止工作
# 2023-01-29T05:11:15，follower={72, 73}，leader=71
# 正常工作
# 2023-01-29T05:11:16，72 与 73 断开
# 2023-01-29T05:11:19,331 [myid:] - INFO  [QuorumPeer[myid=2](plain=10.0.10.72:2181)(secure=disabled):QuorumPeer@1255] - LOOKING
# 73 告诉 72，71 是 leader，但是 notify 没到 71，所以 72 不能确定谁是 leader
# 2023-01-29T05:11:28，73 与 71 失去连接，集群停止工作
# 2023-01-29T05:11:56，leader=71，follower={72,73}
# 2023-01-29T05:12:00，开始正常工作
# 2023-01-29T05:12:06，73，72 与 71 断开连接
# 2023-01-29T05:12:34，follower={72, 73}，leader=71
# 2023-01-29T05:12:41，73，72 与 71 断开连接
# 2023-01-29T05:13:25，恢复
# 2023-01-29T05:14:40，72 断开，05:14:41，73 断开
# 2023-01-29T05:17:26，71，故障
# 2023-01-29T05:20:00，之后恢复
```
